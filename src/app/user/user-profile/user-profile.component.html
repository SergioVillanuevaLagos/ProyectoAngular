<div *ngIf="user" class="profile-container">
  <!-- Información del usuario -->
  <div class="profile-left">
    <h2>Información del Usuario</h2>

    <div class="info-item"><strong>RUN:</strong> {{ user.Run }}</div>
    <div class="info-item"><strong>Nombre:</strong> {{ user.Nombre }}</div>
    <div class="info-item">
      <strong>Apellido Paterno:</strong> {{ user.ApellidoPaterno }}
    </div>
    <div class="info-item">
      <strong>Apellido Materno:</strong> {{ user.ApellidoMaterno }}
    </div>
    <div class="info-item"><strong>Correo:</strong> {{ user.Correo }}</div>
    <div class="info-item"><strong>Rol:</strong> {{ user.IdRol }}</div>
  </div>

  <div class="profile-right">
    <!-- Tabla de Locaciones Publicadas -->
    <div class="box" *ngIf="user.locaciones?.length > 0">
      <h3>
        <i class="fas fa-house-user"></i> Propiedades Publicadas ({{
          user.locaciones.length
        }})
      </h3>

      <div class="table-responsive">
        <table class="locaciones-table">
          <thead>
            <tr>
              <th>Imagen</th>
              <th>Ubicación</th>
              <th>Descripción</th>
              <th>Habitaciones</th>
              <th>Baños</th>
              <th>Área (m²)</th>
              <th>Precio</th>
              <th>Puntaje</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let loc of user.locaciones">
              <td>
                <img
                  [src]="
                    'http://localhost:3000/locaciones/' +
                    loc.IDLocacion +
                    '/imagen'
                  "
                  alt="Imagen de la propiedad"
                  class="locacion-img"
                />
              </td>
              <td>{{ loc.Ubicacion }}</td>
              <td>{{ loc.Descripcion }}</td>
              <td>{{ loc.Habitaciones }}</td>
              <td>{{ loc.Banos }}</td>
              <td>{{ loc.Area }}</td>
              <td>${{ loc.PrecioMensual }}</td>
              <td>{{ loc.Puntaje | number : "1.1-2" }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box" *ngIf="!user.locaciones?.length">
      <h3>
        <i class="fas fa-exclamation-circle"></i> Sin propiedades publicadas
      </h3>
    </div>

    <!-- Tabla de Favoritos -->
    <div class="box" *ngIf="user.favoritos?.length > 0">
      <h3>
        <i class="fas fa-heart"></i> Propiedades Favoritas ({{
          user.favoritos.length
        }})
      </h3>

      <div class="table-responsive">
        <table class="locaciones-table">
          <thead>
            <tr>
              <th>Ubicación</th>
              <th>Descripción</th>
              <th>Precio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let fav of user.favoritos">
              <td>{{ fav.Ubicacion }}</td>
              <td>{{ fav.Descripcion }}</td>
              <td>${{ fav.PrecioMensual }}</td>
              <td>
                <button (click)="verDetalle(fav.IdLocacion)">
                  Ver detalle
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box" *ngIf="!user.favoritos?.length">
      <h3><i class="fas fa-heart-broken"></i> Sin propiedades favoritas</h3>
    </div>
  </div>
</div>
